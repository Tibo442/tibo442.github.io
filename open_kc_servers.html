<!doctype html>
<html>
    <head>
        <title>Open KC servers</title>
        <meta name="theme-color" content="#082E6B"/>
        <meta name="author" content="Tibi">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Flat is Justice - Open KC servers">
        <meta name="twitter:description" content="Shows servers which are currently open">
        <script type="text/javascript">
        var svdata={"api_result":1,"api_result_msg":"\u6210\u529f","api_data":{"api_world_info":[{"api_id":1,"api_name":"\u6a2a\u9808\u8cc0\u93ae\u5b88\u5e9c","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":2,"api_name":"\u5449\u93ae\u5b88\u5e9c","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":3,"api_name":"\u4f50\u4e16\u4fdd\u93ae\u5b88\u5e9c","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":4,"api_name":"\u821e\u9db4\u93ae\u5b88\u5e9c","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":5,"api_name":"\u5927\u6e4a\u8b66\u5099\u5e9c","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":6,"api_name":"\u30c8\u30e9\u30c3\u30af\u6cca\u5730","api_rate":98,"api_entry":1,"api_enabled":1},{"api_id":7,"api_name":"\u30ea\u30f3\u30ac\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":8,"api_name":"\u30e9\u30d0\u30a6\u30eb\u57fa\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":9,"api_name":"\u30b7\u30e7\u30fc\u30c8\u30e9\u30f3\u30c9\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":10,"api_name":"\u30d6\u30a4\u30f3\u57fa\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":11,"api_name":"\u30bf\u30a6\u30a4\u30bf\u30a6\u30a4\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":12,"api_name":"\u30d1\u30e9\u30aa\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":13,"api_name":"\u30d6\u30eb\u30cd\u30a4\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":14,"api_name":"\u5358\u51a0\u6e7e\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":15,"api_name":"\u5e4c\u7b75\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":16,"api_name":"\u5bbf\u6bdb\u6e7e\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":17,"api_name":"\u9e7f\u5c4b\u57fa\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":18,"api_name":"\u5ca9\u5ddd\u57fa\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":19,"api_name":"\u4f50\u4f2f\u6e7e\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1},{"api_id":20,"api_name":"\u67f1\u5cf6\u6cca\u5730","api_rate":100,"api_entry":0,"api_enabled":1}]}};
        var last_date="2017-12-28 11:26:09+01:00";
        var en_names=["Yokosuka Naval District", "Kure Naval District", "Sasebo Naval District", "Maizuru Naval District", "Ominato Guard District", "Truk Anchorage", "Lingga Anchorage", "Rabaul Naval Base", "Shortland Anchorage", "Buin Naval Base", "Tawi-Tawi Anchorage", "Palau Anchorage", "Brunei Anchorage", "Hitokappu Bay Anchorage", "Paramushir Anchorage", "Sukumo Bay Anchorage", "Kanoya Airfield", "Iwagawa Airfield", "Saiki Bay Anchorage", "Hashirajima Anchorage"];
        </script>
        <style>
        table {
            border-collapse: collapse;
            display:inline;
        }

        tr {
            border: 1px solid #f5f5f5;
        }
        
        th {
            height: 25px;
        } 
        
        td {
            height: 25px;
        }
        
        #lastupdate {
            font-weight: bold;
        }
        </style>
    </head>
    <body>
        <script type="text/javascript">
          let tableA = document.createElement("table"), tableB = document.createElement("table");
          var topRow = document.createElement("tr");
          topRow.innerHTML = "<th>ID</th><th>Server name (JP)</th><th>Server name (EN)</th><th>% Full</th>";
          tableA.append(topRow);
          tableB.append(topRow.cloneNode(true));
          for(var i = 0; i < svdata.api_data.api_world_info.length; i++) {
              var server = svdata.api_data.api_world_info[i];
              console.log(server);
              var bg = server.api_entry ? "92d177" : "d17b77";
              var entry = document.createElement("tr");
              entry.innerHTML = '<td>' + server.api_id + "</td><td>" + server.api_name +"</td><td>" + en_names[i] + "</td><td>" + server.api_rate+ "</td>";
              entry.setAttribute("style", 'background-color: #' + bg);
              if (i % 2 == 0)
                tableA.append(entry);
              else
                tableB.append(entry);
              }
          document.body.append(tableA);
          document.body.append(tableB);
          document.write('<div id="lastupdate">Last updated: ' + last_date + '</div>');
        </script>
    </body>
</html>
