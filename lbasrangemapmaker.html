<!doctype html>
<html>
    <head>
        <title>Flat is Justice! - dmg suffer</title>
        <meta name="theme-color" content="#082E6B"/>
        <meta name=viewport content="width=device-width, initial-scale=1">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Flat is Justice - lbas range map maker">
        <meta name="twitter:description" content="Make LBAS range maps">
        <meta name="twitter:image" content="http://flatisjustice.moe/pics/lbasrangemapmaker.png">
        <style type="text/css">
            input[type="number"] {
                width:75px;
            }
            canvas {
                margin: 5px;
            }
        </style>
    </head>
    <body>
        SWF XML: lineX part: <br><textarea id="swf">        <item characterId="3" clipDepth="0" depth="2" name="line0" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="13" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="2400" translateY="1840" type="MATRIX"/>
        </item>
        <item characterId="6" clipDepth="0" depth="4" name="line1" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="4420" translateY="2880" type="MATRIX"/>
        </item>
        <item characterId="9" clipDepth="0" depth="6" name="line2" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="5680" translateY="5660" type="MATRIX"/>
        </item>
        <item characterId="12" clipDepth="0" depth="8" name="line3" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="6260" translateY="3940" type="MATRIX"/>
        </item>
        <item characterId="15" clipDepth="0" depth="10" name="line4" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="7660" translateY="2860" type="MATRIX"/>
        </item>
        <item characterId="18" clipDepth="0" depth="12" name="line5" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="8100" translateY="4960" type="MATRIX"/>
        </item>
        <item characterId="21" clipDepth="0" depth="14" name="line6" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="8160" translateY="6120" type="MATRIX"/>
        </item>
        <item characterId="24" clipDepth="0" depth="16" name="line7" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="9800" translateY="3020" type="MATRIX"/>
        </item>
        <item characterId="27" clipDepth="0" depth="18" name="line8" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="10180" translateY="4800" type="MATRIX"/>
        </item>
        <item characterId="30" clipDepth="0" depth="20" name="line9" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="10520" translateY="6480" type="MATRIX"/>
        </item>
        <item characterId="33" clipDepth="0" depth="22" name="line10" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="11640" translateY="4700" type="MATRIX"/>
        </item>
        <item characterId="36" clipDepth="0" depth="24" name="line11" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="10680" translateY="1500" type="MATRIX"/>
        </item>
        <item characterId="39" clipDepth="0" depth="26" name="line12" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="13260" translateY="4880" type="MATRIX"/>
        </item>
        <item characterId="42" clipDepth="0" depth="28" name="line13" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="12640" translateY="2420" type="MATRIX"/>
        </item>
        <item characterId="45" clipDepth="0" depth="30" name="line14" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="6260" translateY="3940" type="MATRIX"/>
        </item>
        <item characterId="48" clipDepth="0" depth="32" name="line15" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="9800" translateY="3020" type="MATRIX"/>
        </item>
        <item characterId="51" clipDepth="0" depth="34" name="line16" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="10180" translateY="4800" type="MATRIX"/>
        </item>
        <item characterId="54" clipDepth="0" depth="36" name="line17" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="10520" translateY="6480" type="MATRIX"/>
        </item>
        <item characterId="57" clipDepth="0" depth="38" name="line18" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="15" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="12640" translateY="2420" type="MATRIX"/>
        </item>
        <item characterId="3" clipDepth="0" depth="40" name="line19" placeFlagHasCharacter="true" placeFlagHasClipActions="false" placeFlagHasClipDepth="false" placeFlagHasColorTransform="false" placeFlagHasMatrix="true" placeFlagHasName="true" placeFlagHasRatio="false" placeFlagMove="false" ratio="0" type="PlaceObject2Tag">
          <matrix hasRotate="false" hasScale="false" nRotateBits="0" nScaleBits="0" nTranslateBits="14" rotateSkew0="0" rotateSkew1="0" scaleX="0" scaleY="0" translateX="2960" translateY="5200" type="MATRIX"/>
        </item>
</textarea><br>
        start API (ingame): <br><textarea id="start">svdata={"api_result":1,"api_result_msg":"\u6210\u529f","api_data":{"api_cell_data":[{"api_id":434,"api_no":0,"api_color_no":4,"api_passed":0},{"api_id":435,"api_no":1,"api_color_no":4,"api_passed":1,"api_distance":1},{"api_id":436,"api_no":2,"api_color_no":4,"api_passed":0,"api_distance":1},{"api_id":437,"api_no":3,"api_color_no":4,"api_passed":1,"api_distance":2},{"api_id":438,"api_no":4,"api_color_no":4,"api_passed":1,"api_distance":3},{"api_id":439,"api_no":5,"api_color_no":4,"api_passed":0,"api_distance":3},{"api_id":440,"api_no":6,"api_color_no":4,"api_passed":0,"api_distance":2},{"api_id":441,"api_no":7,"api_color_no":10,"api_passed":1,"api_distance":4},{"api_id":442,"api_no":8,"api_color_no":10,"api_passed":0,"api_distance":4},{"api_id":443,"api_no":9,"api_color_no":4,"api_passed":0,"api_distance":3},{"api_id":444,"api_no":10,"api_color_no":4,"api_passed":0,"api_distance":4},{"api_id":445,"api_no":11,"api_color_no":4,"api_passed":0,"api_distance":5},{"api_id":446,"api_no":12,"api_color_no":4,"api_passed":0,"api_distance":5},{"api_id":447,"api_no":13,"api_color_no":5,"api_passed":1,"api_distance":5},{"api_id":448,"api_no":14,"api_color_no":4,"api_passed":1,"api_distance":2},{"api_id":449,"api_no":15,"api_color_no":10,"api_passed":1,"api_distance":4},{"api_id":450,"api_no":16,"api_color_no":10,"api_passed":0,"api_distance":4},{"api_id":451,"api_no":17,"api_color_no":4,"api_passed":0,"api_distance":3},{"api_id":452,"api_no":18,"api_color_no":5,"api_passed":1,"api_distance":5},{"api_id":456,"api_no":19,"api_color_no":0,"api_passed":0}],"api_rashin_flg":0,"api_rashin_id":0,"api_maparea_id":6,"api_mapinfo_no":5,"api_no":1,"api_color_no":4,"api_event_id":4,"api_event_kind":1,"api_next":1,"api_bosscell_no":18,"api_bosscomp":0,"api_airsearch":{"api_plane_type":0,"api_result":0},"api_from_no":0}}</textarea><br>
        Map bg URL: <input type="text" id="url" value = "https://i.imgur.com/ax5Tk5a.png"><br><br>
        <button name="Update" onclick="update()">Update</button><br><br>
        <b>Map</b><br>
        <canvas id="graph" width="800" height="480" style="border:1px solid black;"></canvas><br>
        <br><br>
        <script type="text/javascript">
            var context, canvas = document.getElementById("graph");
            var parser = new DOMParser();
            function update() {
                canvas.height = canvas.height;
                context = canvas.getContext("2d");
                var img = new Image();
                img.onload = function() {
                    context.drawImage(img, 0, 0);
                    getCoord(0);
                    eval(document.getElementById("start").value);
                    context.fillStyle = "rgba(128, 255, 0, 1)";
                    context.font = "30px Georgia";

                    for(let a of svdata.api_data.api_cell_data)
                        context.fillText(a.api_distance || "/", getCoord(a.api_no)[0], getCoord(a.api_no)[1]);
                }
                img.src = document.getElementById("url").value;
            }
            function getCoord(id) {
                var swfData = document.getElementById("swf").value;
                var split = swfData.split("\n");
                for(let i = 0; i < split.length; i++) {
                    if(split[i].includes("\"line" + id + "\"")) {
                        let x = split[i+1].split("translateX=\"")[1].split("\"")[0];
                        let y = split[i+1].split("translateY=\"")[1].split("\"")[0];
                        return [x/20,y/20];
                    }
                }                
            }
            update();
        </script>
    </body>
</html>